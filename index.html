<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Portal AI Magn√≠fico 3D ‚Ä¢ PabloDesigner</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>

<canvas id="bg-canvas"></canvas>

<script>
// ============================================================================
//                          ESTILO (CSS) - tudo aqui dentro, modernizado
// ============================================================================
const styles = `
    :root {
        --primary: #00e5ff;
        --primary2: #6a00ff;
        --bg: radial-gradient(circle at top, #121a33, #05070d);
        --header: rgba(5,7,13,0.85);
        --card: rgba(18,26,51,0.8);
        --text: #f0f0ff;
        --glow: 0 0 24px rgba(0,229,255,0.45);
        --input: rgba(14,21,48,0.9);
        --border: rgba(0,229,255,0.25);
    }

    .light {
        --primary: #00d4ff;
        --primary2: #5e00e0;
        --bg: radial-gradient(circle at top, #d0f0ff, #f8fcff);
        --header: rgba(255,255,255,0.92);
        --card: rgba(255,255,255,0.94);
        --text: #111133;
        --glow: 0 0 24px rgba(0,212,255,0.35);
        --input: rgba(255,255,255,0.97);
        --border: rgba(0,0,0,0.08);
    }

    * { margin:0; padding:0; box-sizing:border-box; font-family:system-ui, -apple-system, sans-serif; }
    body {
        background:var(--bg);
        color:var(--text);
        min-height:100vh;
        overflow-x:hidden;
        perspective:1200px;
    }

    #bg-canvas { position:fixed; inset:0; z-index:-2; }

    header {
        position: fixed;
        top: 0; left: 0; right: 0;
        height: 48px;
        background: var(--header);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 16px;
        z-index: 1000;
        box-shadow: 0 2px 16px rgba(0,0,0,0.3);
        border-bottom: 1px solid var(--border);
        transition: all 0.3s ease;
    }

    header:hover { box-shadow: 0 4px 24px rgba(0,0,0,0.4); }

    header b { font-size: 1.2rem; font-weight: 600; letter-spacing: -0.4px; }

    header .user-info {
        display: flex;
        align-items: center;
        gap: 12px;
    }

    header #user-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        border: 2px solid var(--primary);
        box-shadow: var(--glow);
        cursor: pointer;
        object-fit: cover;
        transition: all 0.3s;
    }

    header #user-avatar:hover { transform: scale(1.1); }

    header button {
        background: linear-gradient(135deg, var(--primary), var(--primary2));
        border: none;
        color: white;
        padding: 6px 16px;
        border-radius: 999px;
        font-weight: 600;
        cursor: pointer;
        box-shadow: var(--glow);
        transition: all 0.3s;
        font-size: 0.95rem;
    }
    header button:hover { transform: translateY(-2px) scale(1.04); }

    main {
        padding: 64px 16px 32px;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .hidden { display: none !important; }

    .card, .area, .menu > div {
        background: var(--card);
        backdrop-filter: blur(20px);
        border: 1px solid var(--border);
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        padding: 28px;
        margin: 20px auto;
        width: 100%;
        max-width: 520px;
        transition: all 0.4s ease;
        transform-style: preserve-3d;
    }

    .card:hover, .menu > div:hover, .area:hover {
        transform: translateY(-8px) translateZ(40px) scale(1.02);
        box-shadow: 0 30px 80px rgba(0,0,0,0.6);
    }

    input, button {
        width: 100%;
        padding: 14px 18px;
        margin: 12px 0;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: var(--input);
        color: var(--text);
        font-size: 1.05rem;
        transition: all 0.3s;
    }

    input[type="file"] { padding: 10px; }

    input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: var(--glow);
    }

    button {
        background: linear-gradient(135deg, var(--primary), var(--primary2));
        border: none;
        color: white;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
        cursor: pointer;
        box-shadow: var(--glow);
    }
    button:hover { transform: translateY(-3px); box-shadow: 0 0 40px rgba(0,229,255,0.6); }

    .menu {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 20px;
        width: 100%;
        max-width: 1400px;
        margin: 40px auto;
    }

    .menu > div {
        text-align: center;
        font-size: 1.15rem;
        font-weight: 600;
        cursor: pointer;
        padding: 32px 20px;
        border-radius: 16px;
    }

    .logo {
        width: 110px;
        border-radius: 50%;
        border: 3px solid var(--primary);
        box-shadow: var(--glow);
        margin: 0 auto 20px;
        display: block;
    }

    h2 {
        font-size: 2.1rem;
        background: linear-gradient(135deg, var(--primary), var(--primary2));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-align: center;
        margin-bottom: 20px;
    }

    .msg {
        min-height: 1.4em;
        font-weight: 600;
        margin-top: 12px;
        text-align: center;
    }
    .success { color: #00ffaa; }
    .error { color: #ff5555; }

    pre { background: rgba(0,0,0,0.2); padding: 20px; border-radius: 12px; overflow-x: auto; white-space: pre-wrap; }

    .cell { width:100px; height:100px; background:rgba(255,255,255,0.1); border-radius:12px; font-size:2.5em; display:flex; align-items:center; justify-content:center; cursor:pointer; margin:5px; transition: all 0.3s; }
    .cell:hover { background:rgba(0,229,255,0.2); transform: scale(1.05); }

    #chat-container {
        width: 100%;
        max-width: 800px;
        height: calc(100vh - 100px);
        display: flex;
        flex-direction: column;
        background: var(--card);
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 20px 60px rgba(0,0,0,0.5);
    }

    #messages {
        flex: 1;
        overflow-y: auto;
        padding: 20px;
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    .message {
        max-width: 80%;
        padding: 12px 18px;
        border-radius: 18px;
        line-height: 1.4;
        word-wrap: break-word;
    }

    .user-message {
        align-self: flex-end;
        background: linear-gradient(135deg, var(--primary), var(--primary2));
        color: white;
    }

    .bot-message {
        align-self: flex-start;
        background: var(--input);
        color: var(--text);
    }

    #chat-form {
        display: flex;
        padding: 10px;
        border-top: 1px solid var(--border);
    }

    #chat-input {
        flex: 1;
        margin: 0;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
    }

    #chat-send {
        width: auto;
        padding: 14px 24px;
        margin: 0;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
    }

    @media (max-width: 600px) {
        header { height: 44px; padding: 0 12px; }
        header b { font-size: 1.05rem; }
        main { padding: 56px 12px 24px; }
        .card, .area { padding: 24px 18px; }
        .menu { grid-template-columns: 1fr; }
        header button { padding: 5px 14px; font-size: 0.9rem; }
        header #user-avatar { width: 28px; height: 28px; }
    }

    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
`;

// ============================================================================
//                          HTML DIN√ÇMICO
// ============================================================================
const htmlContent = `
<div id="bg-logo" style="position:fixed;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none;z-index:-1;opacity:0.08;transform-style:preserve-3d;">
    <img src="https://i.ibb.co/Ld9hbLY/redondo-logo-pablodesigner-Photoroom.png" alt="Logo" style="max-width:70%;animation:spin 280s linear infinite;">
</div>

<header>
    <b>üöÄ Portal AI Magn√≠fico 3D</b>
    <div class="user-info">
        <img id="user-avatar" src="" alt="Avatar" style="display:none;" onclick="document.getElementById('foto-input').click();">
        <input type="file" id="foto-input" accept="image/*" style="display:none;">
        <button id="logout" style="display:none;">Sair</button>
        <button id="theme">üåô</button>
    </div>
</header>

<main>

    <!-- Elementos ocultos -->
    <div id="login" class="card hidden">
        <img src="https://i.ibb.co/Ld9hbLY/redondo-logo-pablodesigner-Photoroom.png" class="logo" alt="Logo">
        <h2>Entrar</h2>
        <input id="user" placeholder="Usu√°rio" autocomplete="username">
        <input id="pass" type="password" placeholder="Senha" autocomplete="current-password">
        <button id="entrar">Entrar</button>
        <p style="margin-top:16px;text-align:center;">
            <a href="#" id="ir-registro">Criar conta gratuita</a>
        </p>
        <div id="msg-login" class="msg"></div>
    </div>

    <div id="registro" class="card hidden">
        <img src="https://i.ibb.co/Ld9hbLY/redondo-logo-pablodesigner-Photoroom.png" class="logo" alt="Logo">
        <h2>Criar Conta</h2>
        <input id="reg-user" placeholder="Usu√°rio (m√≠n 3)" autocomplete="username">
        <input id="reg-pass" type="password" placeholder="Senha (m√≠n 4)" autocomplete="new-password">
        <button id="cadastrar">Cadastrar</button>
        <p style="margin-top:16px;text-align:center;">
            <a href="#" id="ir-login">J√° tenho conta</a>
        </p>
        <div id="msg-reg" class="msg"></div>
    </div>

    <div id="portal" class="hidden">
        <h2 style="margin:0 0 40px;">Bem-vindo, <span id="nome"></span> üëã</h2>
        <div class="menu hidden">
            <!-- Menus ocultos, mas fun√ß√µes acess√≠veis via chat -->
        </div>
        <div id="conteudo" class="area hidden">
            <!-- Conte√∫do gerado ser√° usado no chat -->
        </div>
    </div>

    <!-- Chat Principal - AI Magn√≠fico como Grok -->
    <div id="chat-container">
        <div id="messages"></div>
        <form id="chat-form" onsubmit="sendMessage(event)">
            <input id="chat-input" placeholder="Digite sua mensagem..." autocomplete="off" autofocus>
            <button id="chat-send" type="submit">Enviar</button>
        </form>
    </div>

</main>
`;

// ============================================================================
//                          INSERIR ESTILO + HTML
// ============================================================================
const styleElem = document.createElement('style');
styleElem.textContent = styles;
document.head.appendChild(styleElem);

document.body.insertAdjacentHTML('beforeend', htmlContent);

// ============================================================================
//                          FUNDO 3D COM THREE.JS (n√£o alterado)
// ============================================================================
let scene, camera, renderer, particles;

function init3D() {
    const canvas = document.getElementById('bg-canvas');
    scene = new THREE.Scene();
    camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    renderer = new THREE.WebGLRenderer({ canvas, alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);

    const geometry = new THREE.BufferGeometry();
    const vertices = [];
    for (let i = 0; i < 5000; i++) {
        vertices.push(THREE.MathUtils.randFloatSpread(2000));
        vertices.push(THREE.MathUtils.randFloatSpread(2000));
        vertices.push(THREE.MathUtils.randFloatSpread(2000));
    }
    geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));

    const material = new THREE.PointsMaterial({ color: 0x00e5ff, size: 2, transparent: true, opacity: 0.5 });
    particles = new THREE.Points(geometry, material);
    scene.add(particles);

    camera.position.z = 1000;

    animate3D();
    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });
}

function animate3D() {
    requestAnimationFrame(animate3D);
    particles.rotation.x += 0.0005;
    particles.rotation.y += 0.0005;
    renderer.render(scene, camera);
}

// ============================================================================
//                          INTERATIVIDADE 3D EM MOBILE (n√£o alterado)
// ============================================================================
let isMobile = /Mobi|Android/i.test(navigator.userAgent);
if (isMobile && window.DeviceOrientationEvent) {
    window.addEventListener('deviceorientation', (event) => {
        const x = event.beta / 90;
        const y = event.gamma / 90;
        document.body.style.transform = `rotateX(${x * 10}deg) rotateY(${y * 10}deg)`;
    });
}

let startX, startY;
document.addEventListener('touchstart', (e) => {
    startX = e.touches[0].clientX;
    startY = e.touches[0].clientY;
});
document.addEventListener('touchmove', (e) => {
    const deltaX = e.touches[0].clientX - startX;
    const deltaY = e.touches[0].clientY - startY;
    document.body.style.transform = `rotateY(${deltaX / 10}deg) rotateX(${deltaY / 10}deg)`;
});

// ============================================================================
//                          SISTEMA DE LOGIN/REGISTRO + FOTO DE PERFIL
// ============================================================================
function hashPass(pass) {
    let hash = 0;
    for (let i = 0; i < pass.length; i++) {
        hash = ((hash << 5) - hash) + pass.charCodeAt(i);
        hash |= 0;
    }
    return hash.toString();
}

function showMsg(id, text, success = false) {
    const el = document.getElementById(id);
    el.textContent = text;
    el.className = `msg ${success ? 'success' : 'error'}`;
    setTimeout(() => el.textContent = '', 5000);
}

function getUsers() {
    try {
        return JSON.parse(localStorage.getItem('users')) || {};
    } catch (e) {
        return {};
    }
}

function saveUsers(users) {
    try {
        localStorage.setItem('users', JSON.stringify(users));
        return true;
    } catch (e) {
        return false;
    }
}

function login() {
    const user = document.getElementById('user').value.trim();
    const pass = hashPass(document.getElementById('pass').value);

    if (!user || !pass) return showMsg('msg-login', 'Preencha os campos');

    const users = getUsers();
    if (users[user] === pass) {
        localStorage.setItem('session', user);
        showMsg('msg-login', 'Entrando...', true);
        setTimeout(() => openPortal(user), 1000);
    } else {
        showMsg('msg-login', 'Dados incorretos');
    }
}

function register() {
    const user = document.getElementById('reg-user').value.trim();
    const passRaw = document.getElementById('reg-pass').value;
    const pass = hashPass(passRaw);

    if (user.length < 3) return showMsg('msg-reg', 'Usu√°rio m√≠nimo 3 caracteres');
    if (passRaw.length < 4) return showMsg('msg-reg', 'Senha m√≠nima 4 caracteres');

    const users = getUsers();
    if (users[user]) return showMsg('msg-reg', 'Usu√°rio j√° existe');

    users[user] = pass;
    if (saveUsers(users)) {
        showMsg('msg-reg', 'Conta criada! Fa√ßa login', true);
        setTimeout(() => {
            document.getElementById('registro').classList.add('hidden');
            document.getElementById('login').classList.remove('hidden');
        }, 1500);
    } else {
        showMsg('msg-reg', 'Erro ao salvar');
    }
}

function openPortal(user) {
    document.getElementById('login').classList.add('hidden');
    document.getElementById('registro').classList.add('hidden');
    document.getElementById('portal').classList.remove('hidden');
    document.getElementById('userName').textContent = user;
    document.getElementById('logoutBtn').style.display = "block";
}

function logout() {
    localStorage.removeItem("session");
    location.reload();
}

function checkSession() {
    const session = localStorage.getItem("session");
    if (!session) return;

    const users = getUsers();
    if (users[session]) {
        openPortal(session);
    } else {
        localStorage.removeItem("session");
    }
}

// ============================================================================
//                          JOGOS E FUNCIONALIDADES
// ============================================================================
let secretNumber = 0;
let guessAttempts = 0;
let tttBoard = Array(9).fill('');
let hangmanWord = '';
let hangmanGuessed = [];
let hangmanWrong = 0;
const hangmanWords = ['javascript', 'programacao', 'criativo', 'youtube', 'instagram', 'tiktok', 'musica', 'viagem', 'tecnologia', 'amor', 'felicidade', 'sucesso', 'motivacao', 'inspiracao', 'conteudo', 'viral', 'trending', 'brasil', 'digital', 'criador'];

function randomChoice(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
}

function extractYouTubeID(url) {
    const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*)/;
    const match = url.match(regExp);
    return (match && match[2].length === 11) ? match[2] : null;
}

let currentSection = '';

function showSection(section) {
    currentSection = section;
    const area = document.getElementById("area");
    let html = `<h3>${section}</h3>`;

    if (section === 'Baixar MP3 YouTube') {
        html += `
            <p>Insira a URL do v√≠deo do YouTube para abrir o downloader externo (y2mate).</p>
            <p style="color:#ff6b6b;"><strong>Aviso importante: Use apenas para conte√∫dos sem direitos autorais ou com permiss√£o expl√≠cita!</strong></p>
            <input id="inputSpecial" placeholder="https://www.youtube.com/watch?v=..." style="margin:15px 0;">
            <button onclick="specialAction()">Abrir Downloader MP3</button>`;
    } else if (section === 'Pedra Papel Tesoura') {
        html += `
            <p>Desafie o computador neste cl√°ssico!</p>
            <div style="text-align:center; margin:40px 0;">
                <button onclick="playRPS('pedra')" style="width:auto; margin:15px; font-size:1.8em; padding:20px 40px;">‚úä Pedra</button>
                <button onclick="playRPS('papel')" style="width:auto; margin:15px; font-size:1.8em; padding:20px 40px;">‚úã Papel</button>
                <button onclick="playRPS('tesoura')" style="width:auto; margin:15px; font-size:1.8em; padding:20px 40px;">‚úÇÔ∏è Tesoura</button>
            </div>
            <div id="rpsResult" style="font-size:1.5em; margin-top:40px;"></div>`;
    } else if (section === 'Jogo da Velha') {
        tttBoard = Array(9).fill('');
        html += `
            <p>Jogue contra o computador (voc√™ √© ‚ùå, computador ‚≠ï)</p>
            <div style="display:grid; grid-template-columns:repeat(3,120px); gap:14px; width:380px; margin:50px auto;">
                ${Array(9).fill(0).map((_,i) => `<div class="cell" id="cell${i}" onclick="playerMove(${i})"></div>`).join('')}
            </div>
            <div id="tttResult" style="text-align:center; margin:40px 0; font-size:1.6em;"></div>
            <button onclick="resetTTT()">Novo Jogo</button>`;
    } else if (section === 'Adivinhe o N√∫mero') {
        secretNumber = Math.floor(Math.random() * 100) + 1;
        guessAttempts = 0;
        html += `
            <p>Escolhi um n√∫mero entre 1 e 100. Quantas tentativas voc√™ precisa?</p>
            <input id="guessInput" type="number" min="1" max="100" placeholder="Seu palpite">
            <button onclick="guessNumber()">Adivinhar</button>
            <div id="guessResult" style="margin-top:40px; line-height:1.8;"></div>
            <button onclick="newGuessGame()" style="margin-top:30px;">Novo Jogo</button>`;
    } else if (section === 'Jogo da Forca') {
        hangmanWord = randomChoice(hangmanWords).toUpperCase();
        hangmanGuessed = [];
        hangmanWrong = 0;
        html += `
            <p>Adivinhe a palavra! Tema: Palavras comuns da cria√ß√£o de conte√∫do</p>
            <div class="hangman-display" id="hangmanWord">${getHangmanDisplay()}</div>
            <p>Letras erradas: <span id="wrongLetters"></span></p>
            <p>Tentativas restantes: <span id="attemptsLeft">6</span></p>
            <input id="letterInput" maxlength="1" placeholder="Digite uma letra" style="width:200px; text-transform:uppercase;">
            <button onclick="guessLetter()">Adivinhar Letra</button>
            <button onclick="showSection('Jogo da Forca')" style="margin-top:20px;">Novo Jogo</button>
            <div id="hangmanResult" style="margin-top:30px; font-size:1.4em;"></div>`;
    } else {
        html += `
            <label for="inputTema">Tema / palavra-chave (obrigat√≥rio para melhores resultados):</label>
            <input id="inputTema" placeholder="Ex: viagens, tecnologia, amor, motiva√ß√£o, fitness...">
            <button onclick="generateContent()">Gerar Conte√∫do Completo</button>
            <div id="output" style="margin-top:40px;"></div>`;
    }

    area.innerHTML = html;

    if (document.getElementById("inputTema")) {
        generateContent();
    }
}

function generateContent() {
    const input = document.getElementById("inputTema");
    let tema = input ? input.value.trim() : '';
    if (!tema) tema = 'criatividade e sucesso';

    let output = '';
    const outputElem = document.getElementById("output");

    switch (currentSection) {
        case 'Ideias de conte√∫do':
            const tipos = [
                "Top 20", "Tutorial definitivo", "Review completo", "Minha jornada com", "Como dominar",
                "Dicas avan√ßadas para", "Os melhores ferramentas de", "Desafio de 90 dias", "Segredos que ningu√©m revela sobre",
                "Vlog di√°rio sobre", "Erros fatais em", "Compara√ß√£o √©pica", "Rotina produtiva com", "Mitos vs realidade sobre",
                "Como criar em casa", "Tend√™ncias 2026 de", "Como mudou minha vida", "Unboxing premium de", "Projetos DIY incr√≠veis para",
                "Receitas saud√°veis com", "Viagens dos sonhos inspiradas em", "Transforma√ß√£o completa com", "Antes e depois chocante de",
                "Como economizar muito em", "Previs√µes bomb√°sticas para", "Rea√ß√£o sincera a", "Par√≥dia hil√°ria de", "Colab ideias sobre",
                "Q&A completo sobre", "Behind the scenes real de", "Um dia intenso com", "Benef√≠cios cient√≠ficos de", "Como evitar armadilhas em",
                "Ranking definitivo de", "Hist√≥ria completa de", "Fatos impressionantes sobre", "Challenge extremo com", "Tour virtual por",
                "Testando gadgets de", "Life hacks geniais para", "S√©rie exclusiva sobre", "Novidades quentes em", "Minha opini√£o pol√™mica sobre",
                "An√°lise profunda de", "Estrat√©gias profissionais para", "Como crescer r√°pido no nicho de", "Casos reais de sucesso em",
                "Ferramentas essenciais para", "Ideias baratas e eficazes para", "Motiva√ß√£o di√°ria para", "Os piores produtos de",
                "Melhor vs pior de", "Guia absoluto para", "Segredos dos tops sobre", "Como eu alcancei resultados com", "Teste de 7 dias de",
                "Recomenda√ß√µes premium de", "Lista gigante de", "Passo a passo detalhado para", "Entrevista fict√≠cia com especialista em",
                "Resenha honesta de", "Compara√ß√£o lado a lado", "Tutorial master de", "Desafio insano de", "24 horas vivendo",
                "Transforma√ß√£o radical com", "Os mais virais sobre", "Memes engra√ßados de", "Dicas secretas de experts em",
                "Rotina matinal com", "Como ganhar dinheiro com", "Os maiores mitos sobre", "Como come√ßar do zero em", "Evolu√ß√£o de"
            ];
            output = '<strong>2000 ideias ultra detalhadas geradas para o tema "' + tema + '":</strong><ul>';
            for (let i = 0; i < 2000; i++) {
                output += `<li>${i+1}. ${randomChoice(tipos)} ${tema} ‚Äì com dicas pr√°ticas, exemplos reais e estrat√©gias comprovadas</li>`;
            }
            output += '</ul>';
            break;

        default:
            output = '<p>Mais ferramentas incr√≠veis chegando em breve! Este portal est√° sempre crescendo üöÄ</p>';
    }

    if (outputElem) outputElem.innerHTML = output;
}

// ============================================================================
//                          INICIALIZA√á√ÉO
// ============================================================================
document.addEventListener("DOMContentLoaded", () => {
    init3D();
    checkSession();

    let theme = localStorage.getItem('theme') || 'dark';
    if (theme === 'light') document.body.classList.add('light');
    document.getElementById('theme').innerHTML = theme === 'light' ? 'üåô' : '‚òÄÔ∏è';

    document.getElementById('theme').onclick = () => {
        document.body.classList.toggle('light-mode');
        let newTheme = document.body.classList.contains('light-mode') ? 'light' : 'dark';
        localStorage.setItem('theme', newTheme);
        document.getElementById('themeToggle').innerHTML = newTheme === 'light' ? 'üåô' : '‚òÄÔ∏è';
    };

    document.getElementById("loginBtn").onclick = login;
    document.getElementById("registerBtn").onclick = register;

    document.getElementById("goRegister").onclick = (e) => {
        e.preventDefault();
        document.getElementById("loginBox").classList.add("hidden");
        document.getElementById("registerBox").classList.remove("hidden");
    };

    document.getElementById("goLogin").onclick = (e) => {
        e.preventDefault();
        document.getElementById("registerBox").classList.add("hidden");
        document.getElementById("loginBox").classList.remove("hidden");
    };

    document.getElementById("logoutBtn").onclick = logout;
});
</script>
</body>
</html>
